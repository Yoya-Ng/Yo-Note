
// ============================================
// 6. src/pages/collections.astro
// æˆ‘çš„æ”¶è—é é¢ (éœ€è¦ premium æˆ– admin)
// ============================================
---
// src/pages/collections.astro
import BaseLayout from "@components/base/BaseLayout.astro";
---

<BaseLayout title="æˆ‘çš„æ”¶è—" description="ä¿å­˜å’Œç®¡ç†æ‚¨å–œæ­¡çš„å…§å®¹">
  <section class="section container">
    <div class="glass rounded-lg p-8 text-center">
      <h2 class="text-2xl font-bold mb-4">ğŸ”’ æ­¤åŠŸèƒ½éœ€è¦é«˜ç´šæœƒå“¡</h2>
      <p class="mb-6">è«‹å…ˆç™»å…¥ä¸¦å‡ç´šç‚ºé«˜ç´šæœƒå“¡ä»¥ä½¿ç”¨æ”¶è—åŠŸèƒ½</p>
      <a href="/login" class="btn btn-primary">å‰å¾€ç™»å…¥</a>
    </div>
  </section>
</BaseLayout>

<style>
.btn {
  @apply px-4 py-2 rounded-lg font-semibold transition-colors;
}

.btn-primary {
  @apply bg-blue-500 text-white hover:bg-blue-600;
}

.btn-upgrade {
  @apply bg-yellow-500 text-white hover:bg-yellow-600;
}
</style>

<script>
  // å®¢æˆ¶ç«¯æª¢æŸ¥ç™»å…¥ç‹€æ…‹å’Œæ¬Šé™
  if (typeof window !== 'undefined') {
    const token = localStorage.getItem('auth_token');
    const userInfo = localStorage.getItem('user_info');
    
    if (token && userInfo) {
      try {
        const user = JSON.parse(userInfo);
        const container = document.querySelector('.section.container');
        
        if (user.role === 'premium' || user.role === 'admin') {
          // é«˜ç´šæœƒå“¡ï¼Œé¡¯ç¤ºæ”¶è—åŠŸèƒ½
          if (container) {
            container.innerHTML = `
              <h1 class="text-3xl font-bold mb-8">â­ æˆ‘çš„æ”¶è—</h1>
              
              <div class="glass rounded-lg p-8">
                <div class="text-center mb-8">
                  <p class="text-gray-600 dark:text-gray-400 mb-4">
                    æ‚¨é‚„æ²’æœ‰æ·»åŠ ä»»ä½•æ”¶è—
                  </p>
                  <button class="btn btn-primary">é–‹å§‹æ”¶è—å…§å®¹</button>
                </div>
              </div>

              <!-- æ”¶è—åˆ—è¡¨ç¤ºä¾‹ -->
              <div class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="glass rounded-lg p-6">
                  <h3 class="font-bold mb-2">ç¤ºä¾‹æ”¶è— 1</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    é€™æ˜¯æ‚¨æ”¶è—çš„å…§å®¹
                  </p>
                  <button class="mt-4 text-blue-500 hover:text-blue-600">æŸ¥çœ‹è©³æƒ…</button>
                </div>
              </div>
            `;
          }
        } else {
          // æ™®é€šç”¨æˆ¶ï¼Œé¡¯ç¤ºå‡ç´šæç¤º
          if (container) {
            container.innerHTML = `
              <div class="glass rounded-lg p-8 text-center">
                <h2 class="text-2xl font-bold mb-4">ğŸ”’ é«˜ç´šåŠŸèƒ½</h2>
                <p class="mb-6">æˆ‘çš„æ”¶è—åŠŸèƒ½éœ€è¦é«˜ç´šæœƒå“¡æ¬Šé™</p>
                
                <div class="features bg-bg-t p-4 rounded my-6 text-left max-w-md mx-auto">
                  <h3 class="font-bold mb-3">é«˜ç´šæœƒå“¡å¯äº«å—ï¼š</h3>
                  <ul class="list-none space-y-2">
                    <li>âœ“ ä¿å­˜ç„¡é™å€‹äººæœ€æ„›æ–‡ç« </li>
                    <li>âœ“ å»ºç«‹å¤šå€‹æ”¶è—æ¸…å–®</li>
                    <li>âœ“ åˆ†äº«æ”¶è—çµ¦æœ‹å‹</li>
                    <li>âœ“ é›¢ç·šæŸ¥çœ‹ä¿å­˜å…§å®¹</li>
                  </ul>
                </div>
                
                <button onclick="alert('å‡ç´šåŠŸèƒ½å°‡åœ¨æœªä¾†æ¨å‡º')" class="btn btn-upgrade">
                  å‡ç´šåˆ°é«˜ç´šæœƒå“¡
                </button>
              </div>
            `;
          }
        }
      } catch (error) {
        console.error('Error parsing user info:', error);
      }
    }
  }
</script>
